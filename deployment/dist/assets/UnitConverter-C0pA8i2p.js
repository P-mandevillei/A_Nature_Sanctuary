import{r as c,j as e,C as b}from"./index-D0sySJTx.js";import{C as w}from"./Card-BC8QCPnE.js";import{F as m,B as v}from"./Form-D188bMh_.js";import{R}from"./Row-B2M4-w_P.js";import{C as j}from"./Col-BPqTZ1eJ.js";import{u as F}from"./UseLocalStorage-CVTCP6CS.js";function S(l){const r=c.useId(),a=c.useId(),[u,t]=c.useState(0),[s,d]=c.useState("");return c.useEffect(()=>{t(0),d("")},[l.reset]),e.jsxs(j,{xs:12,sm:6,md:4,lg:3,className:"fullCol",children:[l.index===0?e.jsx("p",{style:{width:"100%",textAlign:"center",margin:"auto"},children:"1"}):e.jsxs(e.Fragment,{children:[e.jsx("p",{style:{margin:"auto 10px"},children:"="}),e.jsx(m.Label,{htmlFor:a,style:{display:"none"},children:"Enter value here"}),e.jsx(m.Control,{type:"number",id:a,placeholder:"value",name:`value_${l.index}`,value:u,onChange:o=>t(o.target.value)})]}),e.jsx(m.Label,{htmlFor:r,style:{display:"none"},children:"Enter unit here"}),e.jsx(m.Control,{type:"text",id:r,placeholder:"unit",name:`unit_${l.index}`,value:s,onChange:o=>d(o.target.value)})]})}function E(l){const r=l.rules,a=l.setRules,[u,t]=c.useState(2),[s,d]=c.useState(!1);function o(n){n==null||n.preventDefault();const h=new FormData(n.target),i=Object.fromEntries(h.entries());for(let f in i){if(!i[f]){alert("incomplete input!");return}const g=[{value:0,unit:i.unit_0}];let x={},p=0;for(let y in i){if(p===0){p++;continue}p%2===1?x.value=i[y]:(x.unit=i[y],g.push(x),x={}),p++}a([...r,g])}t(2),d(f=>!f)}return e.jsxs(w,{style:{width:"100%",padding:0,border:"none"},children:[e.jsx("h1",{children:"Add your own rules here"}),e.jsx(m,{onSubmit:o,children:e.jsx(b,{fluid:!0,style:{padding:0},children:e.jsxs(R,{style:{width:"100%",margin:"15px 0"},children:[Array.from({length:u}).map((n,h)=>e.jsx(S,{index:h,reset:s},h)),e.jsx(j,{xs:12,sm:6,md:4,lg:3,className:"fullCol",children:e.jsx(v,{className:"round primaryColorBg primaryColorBgHover",style:{aspectRatio:"1/1",margin:"auto"},onClick:()=>{u>1?t(u+1):t(2)},children:"+"})}),e.jsx(j,{xs:12,children:e.jsx(v,{type:"submit",children:"Submit"})})]})})})]})}const C=1e4;function I(l){const r=l.rules,a=[];for(let t of r)a.push({state:c.useState(t.value),id:c.useId()});function u(t,s){const[d,o]=a[t].state;o(s),s||(s=0);for(let n=0;n<a.length;n++)if(n!==t){const[h,i]=a[n].state,f=Math.round(s/r[t].value*r[n].value*C)/C;i(f)}}return e.jsx(w,{style:{width:"100%",padding:0,border:"none"},children:e.jsx(b,{fluid:!0,style:{padding:0},children:e.jsx(R,{style:{width:"100%",margin:"15px 0"},children:r.map((t,s)=>{const{state:d,id:o}=a[s],[n,h]=d;return e.jsxs(j,{xs:6,sm:4,md:3,lg:2,style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center",padding:0},children:[e.jsx(m.Control,{id:o,value:n,onChange:i=>u(s,i.target.value),type:"number"}),e.jsxs(m.Label,{htmlFor:o,style:{margin:"auto 5px",whiteSpace:"nowrap"},children:[" ",s===r.length-1?t.unit:t.unit+" = "," "]},s)]},s)})})})})}function _(){const[l,r]=F("unitConversionRules",[]);return e.jsxs("div",{className:"pad",children:[e.jsx(E,{rules:l,setRules:r}),l.map((a,u)=>e.jsx(I,{rules:a},u))]})}export{_ as default};
